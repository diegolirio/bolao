<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

	// Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});
	// Set a callback to run when the Google Visualization API is loaded.
	google.setOnLoadCallback(drawChart);
	// Callback that creates and populates a data table,
	// instantiates the pie chart, passes in the data and
	// draws it.		
    function drawChart() {
			// Create the data table.
			var data = new google.visualization.DataTable();
			data.addColumn('string', 'Critérios de Acertos');
			data.addColumn('number', 'Quantidade');
			data.addRows([
				['AP', 3], // Acertou Placar
				['AR', 2], // Acertou Vencedor e Resultado de Gols de um time
				['AV', 6], // Acertou Vencedor
				['AE', 2], // Acertou Empate com placar diferente
				['AS', 3], // Acertou somente o Resultado de Gols de um time.
				['ER', 2]  // Errou Tudo
			]);
			// Set chart options
			var options = {'title':'18 Jogos',
						   'width':350,
						   'height':200,
						   is3D: true
						  };
			// Instantiate and draw our chart, passing in some options.
			var chart = new google.visualization.PieChart(document.getElementById('chart'));
			chart.draw(data, options);
    }
	
	/*
      google.setOnLoadCallback(drawChart_line);
      function drawChart_line() {
	    var data = new google.visualization.DataTable();
		data.addColumn('string', 'Jogos');
		data.addColumn('number', 'Colocação');
        //data.addColumn('number', 'Expenses');
        data.addRows(36);
        data.setValue(0, 0, '1º Jogo');
        data.setValue(0, 1, 21);
        //data.setValue(0, 2, 400);
        data.setValue(1, 0, '2º Jogo');
        data.setValue(1, 1, 15);
        //data.setValue(1, 2, 460);
        data.setValue(2, 0, '3º Jogo');
        data.setValue(2, 1, 2);
        //data.setValue(2, 2, 1120);
        data.setValue(3, 0, '4º Jogo');
        data.setValue(3, 1, 1);
        //data.setValue(3, 2, 540);
		data.setValue(4, 0, '5º Jogo');
        data.setValue(4, 1, 5);
        //data.setValue(3, 2, 540);
        data.setValue(5, 0, '6º Jogo');
        data.setValue(5, 1, 12);
        //data.setValue(3, 2, 540);
        data.setValue(6, 0, '7º Jogo');
        data.setValue(6, 1, 9);
        //data.setValue(3, 2, 540);

        data.setValue(7, 0, '8º');
        data.setValue(7, 1, 5);
        data.setValue(8, 0, '9º');
        data.setValue(8, 1, 3);		

        data.setValue(9, 0, '10º Jogo');
        data.setValue(9, 1, 1);
        //data.setValue(0, 2, 400);
        data.setValue(10, 0, '11º Jogo');
        data.setValue(10, 1, 5);
        //data.setValue(1, 2, 460);
        data.setValue(11, 0, '12º Jogo');
        data.setValue(11, 1, 6);
        //data.setValue(2, 2, 1120);
        data.setValue(12, 0, '13º Jogo');
        data.setValue(12, 1, 4);
        //data.setValue(3, 2, 540);
		data.setValue(13, 0, '14º Jogo');
        data.setValue(13, 1, 7);
        //data.setValue(3, 2, 540);
        data.setValue(14, 0, '15º Jogo');
        data.setValue(14, 1, 5);
        //data.setValue(3, 2, 540);
        data.setValue(15, 0, '16º Jogo');
        data.setValue(15, 1, 4);
        //data.setValue(3, 2, 540);

        data.setValue(16, 0, '17º Jogo');
        data.setValue(16, 1, 2);
        data.setValue(17, 0, '18º Jogo');
        data.setValue(17, 1, 1);		

        data.setValue(18, 0, '19º Jogo');
        data.setValue(18, 1, 1);
        //data.setValue(0, 2, 400);
        data.setValue(19, 0, '20º Jogo');
        data.setValue(19, 1, 1);
        //data.setValue(1, 2, 460);
        data.setValue(20, 0, '21º Jogo');
        data.setValue(20, 1, 1);
        //data.setValue(2, 2, 1120);
        data.setValue(21, 0, '22º Jogo');
        data.setValue(21, 1, 1);
        //data.setValue(3, 2, 540);
		data.setValue(22, 0, '23º Jogo');
        data.setValue(22, 1, 2);
        //data.setValue(3, 2, 540);
        data.setValue(23, 0, '24º Jogo');
        data.setValue(23, 1, 2);
        //data.setValue(3, 2, 540);
        data.setValue(24, 0, '25º Jogo');
        data.setValue(24, 1, 3);
        //data.setValue(3, 2, 540);

        data.setValue(25, 0, '26º Jogo');
        data.setValue(25, 1, 2);
        data.setValue(26, 0, '27º Jogo');
        data.setValue(26, 1, 2);		

        data.setValue(27, 0, '28º Jogo');
        data.setValue(27, 1, 3);
        //data.setValue(0, 2, 400);
        data.setValue(28, 0, '29º Jogo');
        data.setValue(28, 1, 3);
        //data.setValue(1, 2, 460);
        data.setValue(29, 0, '30º Jogo');
        data.setValue(29, 1, 3);
        //data.setValue(2, 2, 1120);
        data.setValue(30, 0, '31º Jogo');
        data.setValue(30, 1, 4);
        //data.setValue(3, 2, 540);
		data.setValue(31, 0, '32º Jogo');
        data.setValue(31, 1, 6);
        //data.setValue(3, 2, 540);
        data.setValue(32, 0, '33º Jogo');
        data.setValue(32, 1, 6);
        //data.setValue(3, 2, 540);
        data.setValue(33, 0, '34º Jogo');
        data.setValue(33, 1, 5);
        //data.setValue(3, 2, 540);

        data.setValue(34, 0, '35º Jogo');
        data.setValue(34, 1, 7);
        data.setValue(35, 0, '36º Jogo');
        data.setValue(35, 1, 8);				

        var options = {
          title: 'Histótico de Colocação',
		  vAxis: {maxValue: 10, direction: -1} // Inverte a Coluna em ordem crescente...
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_line'));		
        chart.draw(data, options);
      }	
	 */

	function get_detail_participante(inscricao_pk) {
	
		$.getJSON('/perfil_competicao_modal/'+inscricao_pk,  // URL 
				  function(retorno) {         // REQUISIÇÂO        	  				  
					//alert(JSON.stringify(retorno)); // Convert JSon para String				  
					html_ = '<h2>';
					html_ +=     '<img src="'+retorno[0].fields.participante_foto+'" height="50" width="55" class="img-rounded"/>    ';
					html_ +=     '<a href="/perfil_competicao/{{competicao.id}}/'+retorno[0].fields.inscricao_id+'">  '+retorno[0].fields.participante_apelido+'</a>';
					html_ += '</h2>';
					$('#title_modal').html(html_);
					
					$('#col_pt').html('<div><br/><br/><h4> '+retorno[0].fields.inscricao_colocacao+'º Colocado </h4><br/><h4> '+retorno[0].fields.inscricao_pontos+' pontos </h4></div>');				  				
				  }           
		);  	
	}
	
</script>

<div class="row">

	{% if valor_acumulado != 0 %}
		<h5 class="pull-right">R$ {{ valor_acumulado }} <span class="">Acumulado</span></h5> 
	{% endif %}
	
	<p>{{competicao.campeonato.nome}}</p>
	<h3>Copa <a href="{{patrocinador.patrocinador.url_site}}" target="_blank">{{patrocinador.patrocinador.nome_visual}}</a> {{competicao.nome}}</h3>

	<br/>
	<!-- Modal Contato -->
	<div id="modal_contato" class="modal-ui hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="text-warning">X</span></button>
			<h3>Contato</h3>
		</div>
		<div class="modal-body">
			<form action="/contato_email/" method="POST" class="form-horizontal"> {% csrf_token %}	
				<div id="legend">
				   <legend><h3>Email</h3></legend>
				</div>			
				<div class="control-group">
					<label class="control-label">Nome</label>										
					<div class="controls">
						<input type="text" name="nome" value="{{user_inscricao.participante.apelido}}">
						<!--
						{ if form.dono.errors } 
							{ for error in form.dono.errors }
								<span class="help-inline"><span class="text-error">{ error|escape }</span></span>
							{ endfor }
						{ endif } 																
						-->
					</div>	
				</div>			
				<div class="control-group">
					<label class="control-label">Email</label>										
					<div class="controls">
						<input type="text" name="email" value="{{user_inscricao.participante.user.email}}">
						<!--
						{ if form.dono.errors } 
							{ for error in form.dono.errors }
								<span class="help-inline"><span class="text-error">{ error|escape }</span></span>
							{ endfor }
						{ endif } 																
						-->
					</div>	
				</div>
				<div class="control-group">
					<label class="control-label">Telefone</label>										
					<div class="controls">
						<input type="text" name="telefone" value="{{user_inscricao.participante.dd}} {{user_inscricao.participante.telefone}}">
						<!--
						{ if form.dono.errors } 
							{ for error in form.dono.errors }
								<span class="help-inline"><span class="text-error">{ error|escape }</span></span>
							{ endfor }
						{ endif } 																
						-->
					</div>	
				</div>					
				<div class="control-group">
					<label class="control-label">Mensagem</label>										
					<div class="controls">
						<textarea id="message" name="message" class="span4" placeholder="Sua Mensagem" rows="5"></textarea>				
						<!--
						{ if form.dono.errors } 
							{ for error in form.dono.errors }
								<span class="help-inline"><span class="text-error">{ error|escape }</span></span>
							{ endfor }
						{ endif } 																
						-->
					</div>	
				</div>									
			</form>
		</div>
		<div class="modal-footer">
			<button type="submit" class="btn btn-danger"><i class="icon-ok"></i> Enviar </button>
			<a href="#" class="btn" type="button"><i class="icon-ban-circle"></i> Cancelar</a>				
		</div>
	</div>		
	<!-- Fim  Modal Contato -->
	
	{% if not user_inscricao.pagamento and competicao.valor_aposta > 0 and user_inscricao.id > 0 %}
		<div class="alert alert-block">
			<button type="button" class="close" data-dismiss="alert">&times;</button>
			<h2>Aviso!</h2>
			<h4>
				Realize seu pagamento para oficializar sua participação no SuperBolão.com 		
				<a href="#modal_contato" role="button" onclick="" data-toggle="modal" class="alert-link"> Clique aqui</a> para entrar em contato.
			</h4>
		</div>	
	{% endif %}

	<!-- Modal -->
	<div id="modal_part" class="modal-ui hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="text-warning">X</span></button>
			<div id="title_modal">
				<img src="/media/images/159.gif" class="img-rounded"/> 
			</div>
		</div>
		<div class="modal-body">
			<div id="content_modal">
					<div class="pull-right"><div id="chart"></div></div>
					<div id="col_pt">
						<center><img src="/media/images/211.gif" class="img-rounded"/> </center>
					</div>
					<br/>
					<center><div id="chart_line"></div></center>				
			</div>
		</div>
		<div class="modal-footer">
			Fechar
		</div>
	</div>	
	<!-- Fim Modal -->
	
	<div class="span10">
	
		<p class="pull-left"><a href="#"><a href="javascript:frame_impressao.print()">Imprimir</a></p>
        <iframe name='frame_impressao' id='frame_impressao' height='0' width='0' src='/imprimir_rancking/{{competicao.id}}/' frameborder=' '>
        </iframe>		
		
		{% include 'legenda_pontos.html' %}
		
		<!--% include 'rancking_table.html' %-->	

		<table class="table table-striped table-hover well">
			<tr>
				<td class="text-error">Col.</td>
				<td class="text-error">Participante</td>
				<td class="text-error">Insc.</td>
				<td class="text-error" title="Pontos"><center>Pontos</center></td>
				<td class="text-error" title="Acerto do Placar">AP</td>
				<td class="text-error" title="Acerto do Vencedor e quantidade de gols de um Time">AR</td>
				<td class="text-error" title="Acerto do Vencedor">AV</td>
				<td class="text-error" title="Acerto de Empate com placar diferente">AE</td>
				<td class="text-error" title="Acerto de Somente da quantidade de gols de um Time">AS</td>
				<td class="text-error" title="Acerto de Somente da quantidade de gols de um Time">ER</td>
			</tr>
			{% for ip in inscricoes_competicao %}
			<tr>
				<td class="text-info">{{ ip.colocacao}}º</td>
				<td> <!-- nome participante -->
					<a href="#modal_part" role="button" data-toggle="modal" onclick="get_detail_participante( {{ ip.id }} );">
						<img src="/media/{{ ip.participante.foto }}" height="20" width="25" class="img-rounded"/>
						{{ ip.participante }}
					</a>
					<!--
					<a href="/perfil_competicao/{{competicao.id}}/{{ip.id}}/" {% if ip.participante.id == user_participante.id %} class="text-warning" {% endif %}>
						<img src="/media/{{ ip.participante.foto }}" height="20" width="25" class="img-rounded"/>
						{{ ip.participante }}
					</a>
					-->
				</td>
				<td class="muted">{{ ip.id }}</td>
				<td class="text-info"><center><b>{{ ip.pontos }}</b></center></td>
				<td class="muted">{{ ip.quantidade_acerto_placar }}</td>
				<td class="muted">{{ ip.quantidade_acerto_vencedor_um_resultado_correto }}</td>
				<td class="muted">{{ ip.quantidade_acerto_vencedor }}</td>
				<td class="muted">{{ ip.quantidade_acerto_empate_erro_placar }}</td>
				<td class="muted">{{ ip.quantidade_acerto_somente_resultado_um_time }}</td>
				<td class="muted">{{ ip.quantidade_erro }}</td>
			</tr>
			{% empty %}
				<h2 class="muted">Não há participantes cadastrados</h2>
			{% endfor %}
		</table>
	</div>	
	<div class="span2">
		<span class="text-warning">publicidade</span><br/>
		<div class="visible-desktop">
			<a href="{{ patrocinador.patrocinador.url_site }}" target="_blank">
				<img class="img-rounded" title="{{patrocinador.patrocinador.nome_visual}}" height="100" width="150" src="/media/{{ patrocinador.patrocinador.image_aside }}"/>
			</a>
			<br/><br/>
		</div>	
		
		{% for p in patrocinadores %}
			<div class="visible-desktop">
				<a href="{{ p.competicacao_patrocinador.patrocinador.url_site }}" target="_blank">
					<img class="img-rounded" title="{{p.competicacao_patrocinador.patrocinador.nome_visual}}" height="100" width="150" src="/media/{{ p.competicacao_patrocinador.patrocinador.image_aside }}"/>
				</a>
				<br/><br/>
			</div>			
		{% endfor %}
		
		<!--
		<div class="visible-desktop">
			<a href="http://www.asisco.com.br" target="_blank"><img class="img-rounded" src="/media/images/patrocinadores/cocacola.png"/></a>
			<br/><br/>
		</div>
		<div class="visible-desktop">
			<a href="http://www.asisco.com.br" target="_blank"><img class="img-rounded" src="/media/images/patrocinadores/asisco.jpg"/></a>
			<br/><br/>
		</div>
		-->
		<div class="patrocinador">
			<img class="img-rounded" height="100" width="150" src="/media/images/patrocinadores/anuncie.gif"/>
		</div>
	</div>
</div>
